# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

Always use context7 when I need code generation, setup or configuration steps, or
library/API documentation. This means you should automatically use the Context7 MCP
tools to resolve library id and get library docs without me having to explicitly ask.

## Project Overview

Minimalist habit tracker web application for daily habit tracking with week view. Built as a Progressive Web App (PWA) with offline-first architecture.

## Technology Stack

- **Vite** - Build tool and dev server
- **React 18** - UI framework
- **TypeScript** - Type safety
- **Tailwind CSS v4** - Styling (via @tailwindcss/vite)
- **shadcn/ui** - UI component library
- **Zustand** - State management with persist middleware
- **date-fns** - Date manipulation
- **zod** - Runtime validation
- **vite-plugin-pwa** - PWA support

## Architecture

### Data Model

```typescript
interface Habit {
  id: string;
  name: string;
  createdAt: number;
  completedDates: string[]; // ISO date strings (YYYY-MM-DD)
  skippedDates: string[];   // ISO date strings
}
```

### State Management

- **Zustand store** ([src/store/habitStore.ts](src/store/habitStore.ts)) handles all state
- **persist middleware** automatically syncs with localStorage
- **Storage key**: `habit-tracker-storage`
- **Cross-tab sync** via storage events (automatic)

### Component Structure

```
App (src/App.tsx)
└── HabitTable (src/components/HabitTable.tsx)
    └── shadcn/ui components (Button, Input, Card)
```

**UI Layout**: Table-style interface with fixed left column for habit names and horizontally scrollable right area for weekdays.

### Key Files

- [src/store/habitStore.ts](src/store/habitStore.ts) - Zustand store with localStorage persistence
- [src/types/index.ts](src/types/index.ts) - TypeScript types and Zod validation schemas
- [src/utils/dates.ts](src/utils/dates.ts) - Date utilities for week calculations
- [src/components/HabitTable.tsx](src/components/HabitTable.tsx) - Main table UI with fixed habit column and scrollable days
- [src/components/ui/](src/components/ui/) - shadcn/ui component library
- [vite.config.ts](vite.config.ts) - Vite configuration with PWA plugin and path aliases

## Development Commands

### Start Development Server
```bash
npm run dev
```
Runs on http://localhost:5173

### Build for Production
```bash
npm run build
```
Output: `dist/` directory

### Preview Production Build
```bash
npm run preview
```

### Type Check
```bash
npx tsc --noEmit
```

### Lint
```bash
npm run lint
```

## Design Principles

- **Minimalism** - Clean table interface, no distractions
- **Table Layout** - Fixed habit names column + horizontally scrollable weekdays
- **Mobile-first** - Responsive design with Tailwind breakpoints
- **Offline-first** - PWA with service worker caching
- **Fast** - All data stored locally, instant interactions
- **Simple UX** - Click to toggle: null → done (✓) → skip (✕) → null
- **shadcn/ui** - Consistent, accessible UI components

## PWA Configuration

- Manifest: Auto-generated by vite-plugin-pwa
- Service Worker: Auto-registration with `autoUpdate`
- Icons: [public/icon-192.png](public/icon-192.png), [public/icon-512.png](public/icon-512.png)
- Offline caching: Workbox with runtime caching

## Data Persistence

- All data stored in **localStorage** via Zustand persist
- No backend or external APIs
- Data persists across sessions and page reloads
- Cross-tab synchronization automatic

## Future Extensions

- **Cloud sync**: Add Supabase/Firebase integration
- **Native mobile**: Wrap with Capacitor for iOS/Android
- **Analytics**: Track completion rates and streaks
- **Export/Import**: Backup and restore habit data
